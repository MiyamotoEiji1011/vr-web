<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VR Video Streaming with SkyWay</title>

  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <!-- A-Frame Extras (コントローラー表示用) -->
  <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

  <!-- SkyWay SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@skyway-sdk/room/dist/skyway_room-latest.js"></script>

  <!-- アプリケーションスクリプト（順番重要） -->
  <script defer src="./skyway.js"></script>
  <script defer src="./a_frame.js"></script>
  <script defer src="./script.js"></script>
</head>

<body>
  <a-scene>
    <!-- カメラリグ -->
    <a-entity id="camera-rig" position="0 0 0">
      <!-- カメラ -->
      <a-entity id="camera" camera position="0 1.6 0" look-controls rotation-reader>
        <!-- 映像スクリーン -->
        <a-plane id="screen"
                 position="0 -0.2 -2"
                 width="3.2"
                 height="1.8"
                 material="shader: flat; color: #111">
        </a-plane>

        <!-- HUD（右側） -->
        <a-text id="hudText"
                value="loading..."
                position="0.8 0 -2"
                width="2.5"
                color="#FFFFFF"
                align="left">
        </a-text>

        <!-- コントローラー情報表示（左側） -->
        <a-text id="controllerInfo"
                value="Controllers\nInitializing..."
                position="-1.5 0 -2"
                width="2.5"
                color="#00FF00"
                align="left">
        </a-text>
      </a-entity>

      <!-- 6DoF コントローラー: Oculus Touch -->
      <a-entity id="leftOculus" 
                oculus-touch-controls="hand: left" 
                controller-listener="hand: left; type: oculus">
      </a-entity>
      <a-entity id="rightOculus" 
                oculus-touch-controls="hand: right" 
                controller-listener="hand: right; type: oculus">
      </a-entity>
    </a-entity>

    <!-- 環境 -->
    <a-sky color="#111"></a-sky>
  </a-scene>

  <!-- リモートビデオ要素（画面外に配置） -->
  <video id="remoteVideo" autoplay playsinline webkit-playsinline muted style="position: fixed; left: -9999px;"></video>
</body>
</html>
